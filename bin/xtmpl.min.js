!function(a,b){var c={padRight:function(a,b,c){return a.length>=b?a:(c=c||" ",a+new Array(b-a.length+1).join(c))},padLeft:function(a,b,c){return a.length>=b?a:(c=c||" ",new Array(b-a.length+1).join(c)+a)},getCuid:function(){var a=(new Date).getTime().toString(16),b=Math.random();b=Math.floor(1e5*b).toString(16);var d=c.padLeft(a,11,"0")+"-"+c.padLeft(b,5,"0");return d.toUpperCase()},isNullOrUndefined:function(a){return null===a||a===b},getVal:function(a,b){if(b=b.replace(/^this\./,""),/^(?:\s*|this)$/.test(b)||c.isNullOrUndefined(a))return a;for(var d=b.split("."),e=0;e<d.length&&(a=a[d[e]],!c.isNullOrUndefined(a));e+=1);return a},resolvePath:function(a,b){a=a.replace(/(\w+|^|\/)\./g,"$1/"),a+="/",b=b||"",b=b.replace(/(\w+)\./g,"$1/"),b=(a+b).split("/");for(var c=[],d=0;d<b.length;d+=1)b[d]&&(".."===b[d]?c.pop():/^(?:\.|this)$/.test(b[d])||c.push(b[d]));return c.join(".")},resolveArgs:function(a,b){for(var d=[],e=0;e<b.length;e+=1){var f=b[e];"this"===f?d.push(a):"undefined"!=typeof c.getVal(a,f)?d.push(c.getVal(a,f)):/^[\d.]+$/.test(f)?d.push(parseFloat(f)):/^['"]/.test(f)&&/['"]$/.test(f)?d.push(f.replace(/^['"]|['"]$/g,"")):/^!/.test(f)?d.push(!a[f.replace(/^!/,"")]):d.push(f)}return d},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2f;","\\":"&#x5c;",reg:/[&<>"'\\\/]/g};return(a+"").replace(b.reg,function(a){return b[a]})}},d={},e={},f={},g={escapeHtml:!0};d.registerHelper=function(a,b){f[a]=b},d.config=function(a,b){if("string"==typeof a)g[a]=b;else for(var c in a)g[c]=a[c]},d.compile=function(a){var b=/\{\{#\s*(\w+)(?:\s+([^}]+))?\s*\}\}([\s\S]*)\{\{\/\s*\1\s*\}\}/g;return a=a.replace(b,function(a,b,g,h){if(!f[b])throw new Error("has no helper named "+b);var i={fn:d.compile(h),args:(g||"this").split(/\s+/)},j=c.getCuid();return e[j]=i,"{{"+b+" "+j+"}}"}),function(b,d){return d=d||{},d.data||(d.data=b,d.curpath="./"),a.replace(/\{\{\s*([^}]+)\s*\}\}/g,function(a,h){var i=h.split(/\s+/);if(1===i.length){var j=c.resolvePath(d.curpath,h),k=c.getVal(d.data,j);return"undefined"==typeof k&&(k=c.getVal(d.extendData,h)),g.escapeHtml&&(k=c.escapeHtml(k)),k}var l=f[i[0]],m=e[i[1]]||{};m.data=d.data,m.curpath=d.curpath,m.fn||(m.args=i.slice(1));var n=c.resolveArgs(b,m.args);return l.apply(b,n.concat(m))})}},d._util=c,a.xtmpl=d}(this),function(a){a.registerHelper("if",function(a,b){return a?b.fn(this):""}),a.registerHelper("each",function(a,b){var c,d=b.args[0],e=b.curpath+"."+d,f="";if(a.push&&a.length)for(c=0;c<a.length;c+=1)b.curpath=e+"."+c,b.extendData={key:c,index:c,value:a[c],first:0===c},f+=b.fn(a[c],b);else for(c in a)a.hasOwnProperty(c)&&(b.curpath=e+"."+c,b.extendData={key:c,index:c,value:a[c]},f+=b.fn(a[c],b));return f}),a.registerHelper("with",function(a,b){var c=b.args[0];return b.curpath=b.curpath+"."+c,b.fn(a,b)})}(this.xtmpl),function(a){"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=a:"function"==typeof define&&define.amd&&define("xtmpl",[],function(){return a})}(this.xtmpl);